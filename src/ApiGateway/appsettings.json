{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "Yarp": "Information"
    }
  },
  "AllowedHosts": "*",
  "Cors": {
    "AllowedOrigins": [
      "https://localhost:5000",
      "https://yourdomain.com"
    ]
  },
  "IpRateLimiting": {
    "EnableEndpointRateLimiting": true,
    "StackBlockedRequests": false,
    "RealIpHeader": "X-Real-IP",
    "ClientIdHeader": "X-ClientId",
    "HttpStatusCode": 429,
    "GeneralRules": [
      {
        "Endpoint": "*",
        "Period": "1s",
        "Limit": 10
      },
      {
        "Endpoint": "*",
        "Period": "1m",
        "Limit": 100
      },
      {
        "Endpoint": "*",
        "Period": "1h",
        "Limit": 1000
      }
    ]
  },
  "IpRateLimitPolicies": {
    "IpRules": []
  },
  "ReverseProxy": {
    "Routes": {
      "auth-route": {
        "ClusterId": "identity-cluster",
        "Match": {
          "Path": "/api/auth/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/auth/{**catch-all}"
          }
        ]
      },
      "listings-route": {
        "ClusterId": "listing-cluster",
        "Match": {
          "Path": "/api/listings/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/listings/{**catch-all}"
          }
        ]
      },
      "vehicles-route": {
        "ClusterId": "vehicle-aggregation-cluster",
        "Match": {
          "Path": "/api/vehicles/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/vehicles/{**catch-all}"
          }
        ]
      },
      "search-route": {
        "ClusterId": "search-cluster",
        "Match": {
          "Path": "/api/search/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/search/{**catch-all}"
          }
        ]
      },
      "alerts-route": {
        "ClusterId": "alert-cluster",
        "Match": {
          "Path": "/api/alerts/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/alerts/{**catch-all}"
          }
        ]
      },
      "watchlist-route": {
        "ClusterId": "watchlist-cluster",
        "Match": {
          "Path": "/api/watchlist/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/watchlist/{**catch-all}"
          }
        ]
      },
      "reports-route": {
        "ClusterId": "reporting-cluster",
        "Match": {
          "Path": "/api/reports/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/reports/{**catch-all}"
          }
        ]
      },
      "dashboard-route": {
        "ClusterId": "dashboard-cluster",
        "Match": {
          "Path": "/api/dashboard/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/dashboard/{**catch-all}"
          }
        ]
      },
      "dealers-route": {
        "ClusterId": "dealer-cluster",
        "Match": {
          "Path": "/api/dealers/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/dealers/{**catch-all}"
          }
        ]
      },
      "images-route": {
        "ClusterId": "image-cluster",
        "Match": {
          "Path": "/api/images/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/images/{**catch-all}"
          }
        ]
      },
      "scraping-route": {
        "ClusterId": "scraping-cluster",
        "Match": {
          "Path": "/api/scraping/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/scraping/{**catch-all}"
          }
        ]
      },
      "markets-route": {
        "ClusterId": "geographic-cluster",
        "Match": {
          "Path": "/api/markets/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/markets/{**catch-all}"
          }
        ]
      },
      "notifications-route": {
        "ClusterId": "notification-cluster",
        "Match": {
          "Path": "/api/notifications/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/notifications/{**catch-all}"
          }
        ]
      },
      "config-route": {
        "ClusterId": "configuration-cluster",
        "Match": {
          "Path": "/api/config/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/config/{**catch-all}"
          }
        ]
      },
      "deduplication-route": {
        "ClusterId": "deduplication-cluster",
        "Match": {
          "Path": "/api/deduplication/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/deduplication/{**catch-all}"
          }
        ]
      },
      "backups-route": {
        "ClusterId": "backup-cluster",
        "Match": {
          "Path": "/api/backups/{**catch-all}"
        },
        "Transforms": [
          {
            "PathPattern": "/api/backups/{**catch-all}"
          }
        ]
      }
    },
    "Clusters": {
      "identity-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5001"
          }
        }
      },
      "listing-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5002"
          }
        }
      },
      "vehicle-aggregation-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5003"
          }
        }
      },
      "search-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5004"
          }
        }
      },
      "alert-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5005"
          }
        }
      },
      "watchlist-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5006"
          }
        }
      },
      "reporting-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5007"
          }
        }
      },
      "dashboard-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5008"
          }
        }
      },
      "dealer-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5009"
          }
        }
      },
      "image-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5010"
          }
        }
      },
      "scraping-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5011"
          }
        }
      },
      "geographic-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5012"
          }
        }
      },
      "notification-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5013"
          }
        }
      },
      "configuration-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5014"
          }
        }
      },
      "deduplication-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5015"
          }
        }
      },
      "backup-cluster": {
        "Destinations": {
          "destination1": {
            "Address": "http://localhost:5016"
          }
        }
      }
    }
  }
}
